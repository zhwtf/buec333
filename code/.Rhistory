source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point()
plot
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm")
plot
?geom_smooth
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
?lm
ols_classsize <- lm(testscr ~ class_size,data=school_df)
summary(ols_classsize)
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
mlr <- lm(testscr ~ class_size + avginc)
mlr <- lm(testscr ~ class_size + avginc, data=school_df)
summary(mlr)
mlr2 <- lm(testscr ~ class_size + avginc + el_pct, data=school_df)
summary(mlr2)
source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
require(readr)
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
require(ggplot2)
qplot(data=school_df,class_size)
small_df <- filter(school_df,class_size<cutoff)
large_df <- filter(school_df,class_size>=cutoff)
cutoff <- 20
# Load the project STAR data
require(readr)
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
# What does the data look like?
# The number of students per teacher
#   is the class size
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
# Look at the distribution of class size
require(ggplot2)
qplot(data=school_df,class_size)
# Manipulate
small_df <- filter(school_df,class_size<cutoff)
large_df <- filter(school_df,class_size>=cutoff)
#    for the schools with small classes
X_bar_small <- mean(small_df$testscr)
s2_small <- var(small_df$testscr)
n_small <- nrow(small_df)
# A 95% confidence interval for mu
X_bar_small + sqrt(s2_small/n_small)*c(-1.96,1.96)
# For the large classes
X_bar_large <- mean(large_df$testscr)
s2_large <- var(large_df$testscr)
n_large <- nrow(large_df)
X_bar_large + sqrt(s2_large/n_large)*c(-1.96,1.96)
DX_bar <- X_bar_small - X_bar_large
DX_bar
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2
# Use (3.19)
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
DX_bar + sqrt(Ds2) * 1.96
# p-value for H0: mu-small - mu-large = 0
tact <- DX_bar / sqrt(Ds2) # t-value
2*pnorm(-abs(tact)) #pnorm ~ Table 1 on page 757.
# However, consider
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
cutoff <- 20
cutoff <- 20
cutoff <- 20
cutoff
require(readr)
?read_csv
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
summary(school_df)
require(ggplot2)
qplot(data=school_df,class_size)
small_df <- filter(school_df,class_size<cutoff)
summary(small_df)
large_df <- filter(school_df,class_size>=cutoff)
X_bar_small <- mean(small_df$testscr)
X_bar_small
s2_small <- var(small_df$testscr)
n_small <- nrow(small_df)
n_small
X_bar_small - 1.96*sqrt(s2_small / n_small)
X_bar_small + 1.96*sqrt(s2_small / n_small)
X_bar_large <- mean(large_df$testscr)
s2_large <- var(large_df$testscr)
n_large <- nrow(large_df)
X_bar_large + sqrt(s2_large/n_large)*c(-1.96,1.96)
DX_bar <- X_bar_small - X_bar_large
DX_bar
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
DX_bar + sqrt(Ds2) * 1.96
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
tact <- DX_bar / sqrt(Ds2) # t-value
2*pnorm(-abs(tact)) #pnorm ~ Table 1 on page 757.
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point()
plot
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
ggsave("nice_plot.pdf",width=10,height=10)
?lm
ols_classsize <- lm(testscr ~ class_size,data=school_df)
summary(ols_classsize)
summary(ols_classsize)
summary(ols_classsize)
mlr <- lm(testscr ~ class_size + avginc, data=school_df)
summary(mlr)
mlr2 <- lm(testscr ~ class_size + avginc + el_pct, data=school_df)
summary(mlr2)
