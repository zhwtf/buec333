source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point()
plot
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm")
plot
?geom_smooth
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
?lm
ols_classsize <- lm(testscr ~ class_size,data=school_df)
summary(ols_classsize)
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
mlr <- lm(testscr ~ class_size + avginc)
mlr <- lm(testscr ~ class_size + avginc, data=school_df)
summary(mlr)
mlr2 <- lm(testscr ~ class_size + avginc + el_pct, data=school_df)
summary(mlr2)
source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
source('C:/Users/Chris Muris/Dropbox/buec333/code/week4-STAR-reg.R', echo=TRUE)
require(readr)
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
require(ggplot2)
qplot(data=school_df,class_size)
small_df <- filter(school_df,class_size<cutoff)
large_df <- filter(school_df,class_size>=cutoff)
cutoff <- 20
# Load the project STAR data
require(readr)
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
# What does the data look like?
# The number of students per teacher
#   is the class size
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
# Look at the distribution of class size
require(ggplot2)
qplot(data=school_df,class_size)
# Manipulate
small_df <- filter(school_df,class_size<cutoff)
large_df <- filter(school_df,class_size>=cutoff)
#    for the schools with small classes
X_bar_small <- mean(small_df$testscr)
s2_small <- var(small_df$testscr)
n_small <- nrow(small_df)
# A 95% confidence interval for mu
X_bar_small + sqrt(s2_small/n_small)*c(-1.96,1.96)
# For the large classes
X_bar_large <- mean(large_df$testscr)
s2_large <- var(large_df$testscr)
n_large <- nrow(large_df)
X_bar_large + sqrt(s2_large/n_large)*c(-1.96,1.96)
DX_bar <- X_bar_small - X_bar_large
DX_bar
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2
# Use (3.19)
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
DX_bar + sqrt(Ds2) * 1.96
# p-value for H0: mu-small - mu-large = 0
tact <- DX_bar / sqrt(Ds2) # t-value
2*pnorm(-abs(tact)) #pnorm ~ Table 1 on page 757.
# However, consider
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
cutoff <- 20
cutoff <- 20
cutoff <- 20
cutoff
require(readr)
?read_csv
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
summary(school_df)
require(ggplot2)
qplot(data=school_df,class_size)
small_df <- filter(school_df,class_size<cutoff)
summary(small_df)
large_df <- filter(school_df,class_size>=cutoff)
X_bar_small <- mean(small_df$testscr)
X_bar_small
s2_small <- var(small_df$testscr)
n_small <- nrow(small_df)
n_small
X_bar_small - 1.96*sqrt(s2_small / n_small)
X_bar_small + 1.96*sqrt(s2_small / n_small)
X_bar_large <- mean(large_df$testscr)
s2_large <- var(large_df$testscr)
n_large <- nrow(large_df)
X_bar_large + sqrt(s2_large/n_large)*c(-1.96,1.96)
DX_bar <- X_bar_small - X_bar_large
DX_bar
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
DX_bar + sqrt(Ds2) * 1.96
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
tact <- DX_bar / sqrt(Ds2) # t-value
2*pnorm(-abs(tact)) #pnorm ~ Table 1 on page 757.
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point()
plot
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
ggsave("nice_plot.pdf",width=10,height=10)
?lm
ols_classsize <- lm(testscr ~ class_size,data=school_df)
summary(ols_classsize)
summary(ols_classsize)
summary(ols_classsize)
mlr <- lm(testscr ~ class_size + avginc, data=school_df)
summary(mlr)
mlr2 <- lm(testscr ~ class_size + avginc + el_pct, data=school_df)
summary(mlr2)
cutoff <- 20
cutoff <- 20
require(readr)
school_df <- read_csv("testscores_california_1999.csv")
summary(school_df)
require(dplyr)
school_df <- mutate(school_df, class_size = enrl_tot / teachers)
summary(school_df)
require(ggplot2)
qplot(data=school_df,class_size)
small_df <- filter(school_df,class_size<cutoff)
large_df <- filter(school_df,class_size>=cutoff)
cutoff
X_bar_small <- mean(small_df$testscr)
s2_small <- var(small_df$testscr)
n_small <- nrow(small_df)
X_bar_small
n_small
X_bar_small + sqrt(s2_small/n_small)*c(-1.96,1.96)
X_bar_large <- mean(large_df$testscr)
s2_large <- var(large_df$testscr)
n_large <- nrow(large_df)
X_bar_large + sqrt(s2_large/n_large)*c(-1.96,1.96)
DX_bar <- X_bar_small - X_bar_large
DX_bar
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2 <- s2_small / n_small + s2_large / n_large
Ds2
DX_bar + sqrt(Ds2) * c(-1.96,1.96)
tact <- DX_bar / sqrt(Ds2) # t-value
tact
2*pnorm(-abs(tact)) #pnorm ~ Table 1 on page 757.
pnorm(-3.92)
vars <- c("comp_stu", "expn_stu", "avginc", "el_pct")
cbind(colMeans(small_df[,vars]),
colMeans(large_df[,vars]))
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point()
plot
plot <- ggplot(data=school_df,aes(x=class_size,y=testscr)) +
geom_point() +
geom_smooth(method="lm",se=FALSE)
plot
ggsave("nice_plot.pdf",width=10,height=10)
?lm
ols_classsize <- lm(testscr ~ class_size,data=school_df)
summary(ols_classsize)
summary(ols_classsize)
mlr <- lm(testscr ~ class_size + avginc, data=school_df)
summary(mlr)
summary(mlr)
mlr2 <- lm(testscr ~ class_size + avginc + el_pct, data=school_df)
summary(mlr2)
summary(school_df)
rm(list=ls())
require(foreign)
require(ggplot2)
## Load the data. We are interested in the
wageData <- read.dta("WAGE1.DTA")
wageData$female <- as.factor(wageData$female)
summary(wageData)
mean(wageData$wage[wageData$female==1]) #select only the women
mean(wageData$wage[wageData$female==0]) #select only the men
Ybar_female <- mean(wageData$wage[wageData$female==1]) #select only the women
Ybar_male <- mean(wageData$wage[wageData$female==0]) #select only the men
wage_gap <- Ybar_female - Ybar_male
lm(wage~femake,data=wageData)
lm(wage~female,data=wageData)
wage_regression <- lm(wage~female,data=wageData)
summary(wage_regression)
wage
wage_gap
summary(lm(wage~educ,data=wageData,subset = (female==1)))
summary(lm(wage ~ female + educ + female*educ,data=wageData))
summary(lm(wage~educ,data=wageData,subset = (female==1)))
summary(lm(wage~educ,data=wageData,subset = (female==0)))
# This is equal to one regression with all the data
summary(lm(wage ~ female + educ + female*educ,data=wageData))
DX = wage_gap
s2female <- var(wageData$wage[wageData$female==1])
s2male <- var(wageData$wage[wageData$female==0])
nfemale <- sum(wageData$female)
nfemale <- sum(wageData$female==1)
nmale <- sum(wageData$female==0)
DX <-  wage_gap
s2female <- var(wageData$wage[wageData$female==1])
s2male <- var(wageData$wage[wageData$female==0])
nfemale <- sum(wageData$female==1)
nmale <- sum(wageData$female==0)
DX_SE <-  sqrt(s2female / nfemale + s2male / nmale)
tact <- DX / DX_SE
2*pnorm(-abs(tact))
summary(wage_regression)
DX_SE
educ_female <- mean(wageData$educ[wageData$female==1])
educ_male <- mean(wageData$educ[wageData$female==0])
educ_gap <- educ_female - educ_male
# Does this matter for the wage gap?
qplot(x=educ,y=lwage,col=female,data=wageData,xlab="Years of education",ylab="Log of hourly averages earnings")
summary(lm(wage~educ,data=wageData,subset = (female==1)))  #1
summary(lm(wage~educ,data=wageData,subset = (female==0)))  #2
summary(lm(wage ~ female + educ + female*educ,data=wageData)) #3
source('C:/Users/Chris Muris/Dropbox/buec333/labfiles/BasicExercises2.R', echo=TRUE)
data <- df(X=X,Y=Y)
source('~/.active-rstudio-document', echo=TRUE)
summary(lm(Y~X,data=data))
source('~/.active-rstudio-document', echo=TRUE)
summary(lm(Y~X,data=df_outlier))
source('~/.active-rstudio-document', echo=TRUE)
df_outlier <- data.framef(X,Y)
df_outlier <- data.frame(X,Y)
summary(lm(Y~X,data=df_outlier))
df$Y[1] <- df$Y[1] + 1
summary(lm(Y~X,data=df_outlier))
df_outlier$Y[1] <- df_outlier$Y[1] + 1
summary(lm(Y~X,data=df_outlier))
df_outlier$Y[1] <- df_outlier$Y[1] + 1000
summary(lm(Y~X,data=df_outlier))
df_outlier$Y[1] <- df_outlier$Y[1] + 10000
summary(lm(Y~X,data=df_outlier))
source('~/.active-rstudio-document', echo=TRUE)
beta0 <-  1
beta1 <-  2
n <- 100
X <- runif(n,0,1)
X
u <- rnorm(n,0,1)
u
Y <- beta0 + beta1*X + u
require(ggplot2)
qplot(X,Y)
df_outlier <- data.frame(X,Y)
df_outlier <- data.frame(X,Y)
summary(lm(Y~X,data=df_outlier))
df_outlier$Y
df_outlier$Y[1] <- df_outlier$Y[1] + 1
summary(lm(Y~X,data=df_outlier))
df$Y
df_outlier$Y
df_outlier$Y[1] <- df_outlier$Y[1] + 100
df_outlier$Y
summary(lm(Y~X,data=df_outlier))
rm(list=ls())
require(foreign)
require(ggplot2)
wageData <- read.dta("WAGE1.DTA")
wageData$female <- as.factor(wageData$female)
summary(wageData)
Ybar_female <- mean(wageData$wage[wageData$female==1]) #select only the women
Ybar_male <- mean(wageData$wage[wageData$female==0]) #select only the men
wage_gap <- Ybar_female - Ybar_male
wage_gap
wage_regression <- lm(wage~female,data=wageData)
summary(wage_regression)
DX <-  wage_gap
s2female <- var(wageData$wage[wageData$female==1])
s2male <- var(wageData$wage[wageData$female==0])
nfemale <- sum(wageData$female==1)
nmale <- sum(wageData$female==0)
DX_SE <-  sqrt(s2female / nfemale + s2male / nmale)
tact <- DX / DX_SE
2*pnorm(-abs(tact))
summary(wage_regression)
matrix(rnorm(6),nrow=3,ncol=2)
matrix(rnorm(3),nrow=3,ncol=2)
?T
T.T <- 20
S <- 3
total_draws <- T.T*S
shock_vector <- rnorm(total_draws)
shock_vector
T.T <- 20
S <- 4
total_draws <- T.T*S
shock_vector <- rnorm(total_draws)
shock_vector
T.T <- 3
S <- 2
total_draws <- T.T*S
shock_vector <- rnorm(total_draws)
shock_vector
matrix(shock_vector,nrow=T.T,ncol=S)
matrix(shock_vector,nrow=T.T,ncol=1)
matrix(shock_vector,nrow=T.T,ncol=4)
matrix(shock_vector,nrow=T.T,ncol=4)
matrix(shock_vector,nrow=T.T,ncol=3)
